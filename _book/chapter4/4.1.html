
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>4.1理想的监控策略 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="4.2.html" />
    
    
    <link rel="prev" href="4.0.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="4.0.html">
            
                <a href="4.0.html">
            
                    
                    4 监控
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1" data-path="4.1.html">
            
                <a href="4.1.html">
            
                    
                    4.1理想的监控策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="4.2.html">
            
                <a href="4.2.html">
            
                    
                    4.2监控数据来源
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="4.3.html">
            
                <a href="4.3.html">
            
                    
                    4.3监控系统管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="4.4.html">
            
                <a href="4.4.html">
            
                    
                    4.4度量指标
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="4.5.html">
            
                <a href="4.5.html">
            
                    
                    4.5报警逻辑测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="4.6.html">
            
                <a href="4.6.html">
            
                    
                    4.6总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >4.1理想的监控策略</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="desirable-features-of-a-monitoring-strategy">Desirable Features of a Monitoring Strategy</h2>
<p>When choosing a monitoring system, it is important to understand and prioritize the features that matter to you. If you&#x2019;re evaluating different monitoring systems, the attributes in this section can help guide your thinking about which solution(s) best suits your needs. If you already have a monitoring strategy, you might consider using some additional capabilities of your current solution. Depending on your needs, one monitoring system may address all of your use cases, or you may want to use a com&#x2010; bination of systems.</p>
<h3 id="speed">Speed</h3>
<p>Different organizations will have different needs when it comes to the freshness of data and the speed of data retrieval.</p>
<p>Data should be available when you need it: freshness impacts how long it will take your monitoring system to page you when something goes wrong. Additionally, slow data might lead you to accidentally act on incorrect data. For example, during inci&#x2010; dent response, if the time between cause (taking an action) and effect (seeing that action reflected in your monitoring) is too long, you might assume a change had no effect or deduce a false correlation between cause and effect. Data more than four to five minutes stale might significantly impact how quickly you can respond to an incident.</p>
<p>If you&#x2019;re selecting a monitoring system based upon this criteria, you need to figure out your speed requirements ahead of time. Speed of data retrieval is mostly a prob&#x2010; lem when you&#x2019;re querying vast amounts of data. It might take some time for a graph to load if it has to tally up a lot of data from many monitored systems. To speed up your slower graphs, it&#x2019;s helpful if the monitoring system can create and store new time series based on incoming data; then it can precompute answers to common queries.</p>
<h3 id="calculations">Calculations</h3>
<p>Support for calculations can span a variety of use cases, across a range of complexi&#x2010; ties. At a minimum, you&#x2019;ll probably want your system to retain data over a multi&#x2010; month time frame. Without a long-term view of your data, you cannot analyze long- term trends like system growth. In terms of granularity, summary data (i.e., aggregated data that you can&#x2019;t drill down into) is sufficient to facilitate growth plan&#x2010; ning. Retaining all detailed individual metrics may help with answering questions like, &#x201C;Has this unusual behavior happened before?&#x201D; However, the data might be expensive to store or impractical to retrieve.</p>
<p>The metrics you retain about events or resource consumption should ideally be monotonically incrementing counters. Using counters, your monitoring system can calculate windowed functions over time&#x2014;for example, to report the rate of requests per second from that counter. Computing these rates over a longer window (up to a month) allows you to implement the building blocks for SLO burn-based alerting (see Chapter 5).</p>
<p>Finally, support for a more complete range of statistical functions can be useful because trivial operations may mask bad behavior. A monitoring system that sup&#x2010; ports computing percentiles (i.e., 50th, 95th, 99th percentiles) when recording latency will let you see if 50%, 5%, or 1% of your requests are too slow, whereas the arith&#x2010; metic mean can only tell you&#x2014;without specifics&#x2014;that the request time is slower. Alternatively, if your system doesn&#x2019;t support computing percentiles directly, you can achieve this by:</p>
<ul>
<li>Obtaining a mean value by summing the seconds spent in requests and dividing by the number of requests</li>
<li>Logging every request and computing the percentile values by scanning or sam&#x2010; pling the log entries</li>
</ul>
<p>You might want to record your raw metric data in a separate system for offline analy&#x2010; sis&#x2014;for example, to use in weekly or monthly reports, or to perform more intricate calculations that are too difficult to compute in your monitoring system.</p>
<h3 id="interfaces">Interfaces</h3>
<p>A robust monitoring system should allow you to concisely display time-series data in graphs, and also to structure data in tables or a range of chart styles. Your dashboards will be primary interfaces for displaying monitoring, so it&#x2019;s important that you choose formats that most clearly display the data you care about. Some options include heatmaps, histograms, and logarithmic scale graphs.</p>
<p>You&#x2019;ll likely need to offer different views of the same data based upon audience; high- level management may want to view quite different information than SREs. Be spe&#x2010; cific about creating dashboards that make sense to the people consuming the content. For each set of dashboards, displaying the same types of data consistently is valuable for communication.</p>
<p>You might need to graph information across different aggregations of a metric&#x2014;such as machine type, server version, or request type&#x2014;in real time. It&#x2019;s a good idea for your team to be comfortable with performing ad hoc drill-downs on your data. By slicing your data according to a variety of metrics, you can look for correlations and patterns in the data when you need it.</p>
<h3 id="alerts">Alerts</h3>
<p>It&#x2019;s helpful to be able to classify alerts: multiple categories of alerts allow for propor&#x2010; tional responses. The ability to set different severity levels for different alerts is also useful: you might file a ticket to investigate a low rate of errors that lasts more than an hour, while a 100% error rate is an emergency that deserves immediate response.</p>
<p>Alert suppression functionality lets you avoid unnecessary noise from distracting on- call engineers. For example:</p>
<ul>
<li>When all nodes are experiencing the same high rate of errors, you can alert just once for the global error rate instead of sending an individual alert for every sin&#x2010; gle node.</li>
<li>When one of your service dependencies has a firing alert (e.g., a slow backend), you don&#x2019;t need to alert for error rates of your service.</li>
</ul>
<p>You also need to be able to ensure alerts are no longer suppressed once the event is over.</p>
<p>The level of control you require over your system will dictate whether you use a third-party monitoring service or deploy and run your own monitoring system. Goo&#x2010; gle developed its own monitoring system in-house, but there are plenty of open source and commercial monitoring systems available.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="4.0.html" class="navigation navigation-prev " aria-label="Previous page: 4 监控">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="4.2.html" class="navigation navigation-next " aria-label="Next page: 4.2监控数据来源">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"4.1理想的监控策略","level":"1.2.1","depth":2,"next":{"title":"4.2监控数据来源","level":"1.2.2","depth":2,"path":"chapter4/4.2.md","ref":"chapter4/4.2.md","articles":[]},"previous":{"title":"4 监控","level":"1.2","depth":1,"path":"chapter4/4.0.md","ref":"chapter4/4.0.md","articles":[{"title":"4.1理想的监控策略","level":"1.2.1","depth":2,"path":"chapter4/4.1.md","ref":"chapter4/4.1.md","articles":[]},{"title":"4.2监控数据来源","level":"1.2.2","depth":2,"path":"chapter4/4.2.md","ref":"chapter4/4.2.md","articles":[]},{"title":"4.3监控系统管理","level":"1.2.3","depth":2,"path":"chapter4/4.3.md","ref":"chapter4/4.3.md","articles":[]},{"title":"4.4度量指标","level":"1.2.4","depth":2,"path":"chapter4/4.4.md","ref":"chapter4/4.4.md","articles":[]},{"title":"4.5报警逻辑测试","level":"1.2.5","depth":2,"path":"chapter4/4.5.md","ref":"chapter4/4.5.md","articles":[]},{"title":"4.6总结","level":"1.2.6","depth":2,"path":"chapter4/4.6.md","ref":"chapter4/4.6.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"chapter4/4.1.md","mtime":"2018-07-30T02:53:37.549Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-07-30T02:11:36.871Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

